$(document).ready(function(){$(".flexslider").flexslider({animation:"slide"}),$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:e.offset().top-90},2e3),!1}})}),$(".player").YTPlayer()}),document.getElementById("rsvpForm").addEventListener("submit",async function(e){e.preventDefault();var t,n=document.getElementById("responseMessage"),e=(n.textContent="Submitting...",n.style="color:green;",e.target),r=new FormData(e),r=Object.fromEntries(r.entries()),s=[],i=(r.firstname?.trim()||s.push("First name is required."),r.surname?.trim()||s.push("Surname is required."),["yes","no"].includes(r.attending)||s.push("Attendance must be yes or no."),"yes"===r.attending);if(i&&(["yes","no"].includes(r.drinks)||s.push("Drinks choice must be yes or no."),r.dish?.trim()||s.push("Please select a dish."),(t=r.email?.trim())&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||s.push("Please enter a valid email address."),["webster","james"].includes(r.security?.trim().toLowerCase())||s.push("Security answer is incorrect.")),i||!r.security?.trim()||["webster","james"].includes(r.security?.trim().toLowerCase())||s.push("Security answer is incorrect."),0<s.length)n.textContent=s.join(" "),n.style="color: red;";else try{var o=await(await fetch(e.action,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r)})).json();o.success?(n.textContent=o.message,n.style="color: green;",e.reset()):(n.textContent=o.error||"Something went wrong.",n.style="color: red;")}catch(e){n.textContent="A network error occurred.",n.style="color: red;"}}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll('input[name="attending"]');let n=document.getElementById("attendingFields"),r=["dietary","dish","drinks","email","security"].map(e=>document.querySelector(`[name="${e}"]`)),s=document.querySelectorAll('input[name="drinks"]');function t(){let t="yes"===document.querySelector('input[name="attending"]:checked')?.value;r.forEach(e=>{e&&(e.required=t)}),s.forEach(e=>{e.required=t}),n.style.display=t?"block":"none"}e.forEach(e=>{e.addEventListener("change",t)}),t()});